<!DOCTYPE html>
<html lang="ZH-TW">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <link rel="stylesheet" href="style.css" />
  <title>Lance&Cathy❤️</title>
</head>

<body>
  <div class="flipbook">
    <div class="hard">
      <img src="images/cover.png" alt="cover" />
    </div>
    <div class="hard">
      <img src="images/preface1.png" alt="preface1" />
    </div>
    <div class="page">
      <img src="images/preface2.png" alt="preface2" />
    </div>
    <div class="page">
      <img src="images/Lance_profile.png"/>
    </div>
    <div class="page">
      <img src="images/Lance.png"/>
    </div>
    <div class="page">
      <img src="images/L1.png"/>
    </div>
    <div class="page">
      <img src="images/L1-2.png"/>
    </div>
    <div class="page">
      <img src="images/L2.png"/>
    </div>
    <div class="page">
      <img src="images/L2-2.png"/>
    </div>
    <div class="page">
      <img src="images/L3.png"/>
    </div>
    <div class="page">
      <img src="images/L3-2.png"/>
    </div>
    <div class="page">
      <img src="images/L4.png"/>
    </div>
    <div class="page">
      <img src="images/L4-2.png"/>
    </div>
    <div class="page">
      <img src="images/L5.png"/>
    </div>
    <div class="hard">
      <img src="images/L5-2.png"/>
    </div>
    <div class="hard">
      <img src="images/bottom.png" alt="bottom" />
    </div>
  </div>
  <div class="landscape-notice">請將裝置旋轉到橫向以獲得最佳體驗.</div>

  

  <script src="jquery.js"></script>
  <script src="turn.js"></script>
  <script>
    function adjustImageSize() {
      const images = document.querySelectorAll(".page img");
      const flipbook = document.querySelector(".flipbook");
      const maxImageWidth = flipbook.offsetWidth * 0.7; // 設定最大寬度為 flipbook 的 70%

      images.forEach((img) => {
        img.style.maxWidth = `${maxImageWidth}px`;
        img.style.height = "auto"; // 確保比例正確
      });
    }

    function adjustFlipbookSize() {
      const flipbook = document.querySelector(".flipbook");
      const notice = document.querySelector(".landscape-notice"); // 遮罩元素
      const screenWidth = window.innerWidth;
      const screenHeight = window.innerHeight;
      const aspectRatio = 5 / 3; // 書本原始寬高比例 (5:3)

      if (screenWidth > screenHeight) { // 橫向模式
          notice.style.display = "none"; // 隱藏旋轉提示
          flipbook.style.height = `${screenHeight}px`; // 高度填滿螢幕
          flipbook.style.width = `${screenHeight * aspectRatio}px`; // 根據 5:3 比例調整寬度
      } else { // 直立模式
          notice.style.display = "flex"; // 顯示旋轉提示
          flipbook.style.width = `${screenWidth * 0.9}px`; // 寬度為螢幕的 90%
          flipbook.style.height = `${(screenWidth * 0.9) / aspectRatio}px`; // 按照 5:3 調整高度
      }

      // 重新設定翻頁效果
      if ($(".flipbook").data("initialized")) {
          $(".flipbook").turn("size", flipbook.offsetWidth, flipbook.offsetHeight);
      } else {
          $(".flipbook").turn({
              width: flipbook.offsetWidth,
              height: flipbook.offsetHeight,
          });
          $(".flipbook").data("initialized", true);
      }
    }

    // 監聽螢幕大小變化 & 初始執行
    window.addEventListener("resize", adjustFlipbookSize);
    window.addEventListener("orientationchange", adjustFlipbookSize);
    window.addEventListener("load", adjustFlipbookSize);
  </script>
  
</body>

</html>